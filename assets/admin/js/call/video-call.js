var client;var fromNumber='FROM_YOUR_NUMBER';var call;$(document).ready(function(){console.log('StringeeUtil.isWebRTCSupported: '+StringeeUtil.isWebRTCSupported());client=new StringeeClient();client.connect(access_token);client.on('connect',function(){console.log('++++++++++++++ connected to StringeeServer')});client.on('authen',function(res){console.log('authen',res);$('#loggedUserId').html(res.userId)});client.on('disconnect',function(){console.log('++++++++++++++ disconnected: '+this.test)});client.on('incomingcall',function(incomingcall){call=incomingcall;settingCallEvent(incomingcall);$('#incoming-call-div').show();call.ringing(function(res){});console.log('++++++++++++++ incomingcall',incomingcall)})});function testAnswerCall(){call.answer(function(res){console.log('answer res',res);$('#incoming-call-div').hide()})}
function testRejectCall(){call.reject(function(res){console.log('reject res',res);$('#incoming-call-div').hide()})}
function testMakeCall(videocall){console.log('make call, videocall: '+videocall);call=new StringeeCall(client,fromNumber,$('#callTo').val(),videocall);settingCallEvent(call);call.makeCall(function(res){console.log('make call callback: '+JSON.stringify(res))})}
function settingCallEvent(call1){call1.on('addremotestream',function(stream){console.log('addremotestream');remoteVideo.srcObject=null;remoteVideo.srcObject=stream});call1.on('addlocalstream',function(stream){console.log('addlocalstream');localVideo.srcObject=null;localVideo.srcObject=stream});call1.on('signalingstate',function(state){console.log('signalingstate ',state);var reason=state.reason;$('#callStatus').html(reason);if(state.code===6){$('#incoming-call-div').hide()}});call1.on('mediastate',function(state){console.log('mediastate ',state)});call1.on('info',function(info){console.log('on info:'+JSON.stringify(info))});call1.on('otherdevice',function(data){console.log('on otherdevice:'+JSON.stringify(data));if((data.type==='CALL_STATE'&&data.code>=200)||data.type==='CALL_END'){$('#incoming-call-div').hide()}})}
function testHangupCall(){remoteVideo.srcObject=null;call.hangup(function(res){console.log('hangup res',res)})}
function upgradeToVideoCall(){call.upgradeToVideoCall()}
function switchVoiceVideoCall(){var info={requestVideo:!0};call.sendInfo(info,function(res){console.log('switchVoiceVideoCall',res)})}
function mute(){var muted=!call.muted;call.mute(muted);if(muted){$('#muteBtn').html('Unmute')}else{$('#muteBtn').html('Mute')}}
function enableVideo(){var success;if(call.localVideoEnabled){success=call.enableLocalVideo(!1)}else{success=call.enableLocalVideo(!0)}
	console.log('enableVideo result: '+success)}